<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MVP QR Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-100 flex items-center justify-center">

  <div class="bg-white shadow-lg rounded-xl p-6 w-full max-w-sm">
    <h1 id="welcomeText" class="text-2xl font-bold text-center mb-6">
      Welcome
    </h1>

    <form id="choiceForm" class="space-y-4">
      <div class="flex items-center space-x-3">
        <input
          type="radio"
          id="option1"
          name="choice"
          value="option1"
          class="w-4 h-4"
        />
        <label for="opti    on1" class="text-gray-700">
          wrongly parked
        </label>    
      </div>

      <div class="flex items-center space-x-3">
        <input
          type="radio"
          id="option2"
          name="choice"
          value="option2"
          class="w-4 h-4"
        />
        <label for="option2" class="text-gray-700">
          Rash driving  
        </label>
      </div>

      <button
        type="submit"
        id="submitBtn"
        disabled
        class="w-full bg-blue-500 text-white py-2 rounded-lg opacity-50 cursor-not-allowed"
      >
        Submit
      </button>
    </form>

    <p id="resultText" class="text-green-600 text-center mt-4 hidden"></p>
  </div>

  <script>
    // 1. Extract name from URL path
   const params = new URLSearchParams(window.location.search);
    const nameFromUrl = params.get("name") || "Guest";

    // Capitalize first letter
    const displayName =
      nameFromUrl.charAt(0).toUpperCase() + nameFromUrl.slice(1);

    document.getElementById("welcomeText").innerText = `Welcome ${displayName}`;

    // 2. Enable submit only after radio selection
    const radios = document.querySelectorAll('input[name="choice"]');
    const submitBtn = document.getElementById("submitBtn");

    radios.forEach(radio => {
      radio.addEventListener("change", () => {
        submitBtn.disabled = false;
        submitBtn.classList.remove("opacity-50", "cursor-not-allowed");
      });
    });

    // 3. Handle submit
    document.getElementById("choiceForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const selected = document.querySelector('input[name="choice"]:checked');

      if (!selected) return;

      // For MVP: just show confirmation
      document.getElementById("resultText").innerText =
        `Thanks ${displayName}, you selected ${selected.value}`;
      document.getElementById("resultText").classList.remove("hidden");

      // Disable further submissions
      submitBtn.disabled = true;
    });
  </script>

</body>
</html>
